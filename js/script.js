// ======================================== // G-FITNESS CORE PROTECTION & AUTH LOGIC // ======================================== function protectPage(){if(localStorage.getItem('isLoggedIn')!== 'true'){window.location.href = 'login.html';}}function logout(){localStorage.clear();window.location.href = 'login.html';}function updateUserNavbar(){const userName = localStorage.getItem('userName');const userMembership = localStorage.getItem('userMembership');if(userName){const navUserName = document.getElementById('navUserName');if(navUserName){navUserName.textContent = userName;}}}function setupLogoutHandler(){const logoutBtn = document.getElementById('logoutBtn');if(logoutBtn){logoutBtn.addEventListener('click',(e)=>{e.preventDefault();logout();});}}function getCurrentUser(){return{email:localStorage.getItem('userEmail'),name:localStorage.getItem('userName'),membership:localStorage.getItem('userMembership')};}// ========== PAGE PROTECTION INITIALIZATION ========== // Protect pages on load if they require authentication document.addEventListener('DOMContentLoaded',()=>{// Get current page name const currentPage = window.location.pathname.split('/').pop()|| 'index.html';// List of protected pages that require login const protectedPages =['index.html','membership.html','products.html','trainers.html','contact.html','user-dashboard.html','admin-dashboard.html'];// Check if current page is protected if(protectedPages.includes(currentPage)){protectPage();}// Setup user navbar if needed if(localStorage.getItem('isLoggedIn')=== 'true'){updateUserNavbar();setupLogoutHandler();}});// ========== UTILITY FUNCTIONS ========== function showAlert(message,type = 'info'){const alertDiv = document.createElement('div');alertDiv.className = `alert alert-${type}alert-dismissible fade show`;alertDiv.setAttribute('role','alert');alertDiv.innerHTML = ` ${message}<button type="button" class="btn-close" data-bs-dismiss="alert"></button> `;const container = document.querySelector('.container')|| document.body;container.insertBefore(alertDiv,container.firstChild);// Auto-dismiss after 5 seconds setTimeout(()=>{alertDiv.remove();},5000);}function isLoggedIn(){return localStorage.getItem('isLoggedIn')=== 'true';}function formatDate(dateString){const options ={year:'numeric',month:'short',day:'numeric'};return new Date(dateString).toLocaleDateString('en-US',options);}// ========== SMOOTH ANIMATIONS ========== document.addEventListener('DOMContentLoaded',()=>{// Add fade-in animation to page document.body.style.opacity = '0';document.body.style.transition = 'opacity 0.5s ease-in';setTimeout(()=>{document.body.style.opacity = '1';},100);});
